version: 3
projects:
- name: my-project-name
  branch: /main/
  dir: plans/
  workspace: default
  autoplan:
    when_modified: ["*.tf", "../modules/**/*.tf", ".terraform.lock.hcl"]
  workflow: staging
workflows:
  staging:
    plan:
      steps:
      - init
      - plan:
          extra_args: ["-var-file", "../staging.tfvars"]